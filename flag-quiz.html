<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üè¥ Flaggen-Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #1a1a2e;
    --surface: #16213e;
    --card: #16213e;
    --card-hover: #1e2d45;
    --accent: #f59e0b;
    --accent-glow: rgba(245, 158, 11, 0.25);
    --green: #34d399;
    --red: #f87171;
    --text: #f0f0f0;
    --text-dim: #a0a0b8;
    --radius: 16px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    overflow-x: hidden;
    overflow-y: auto;
  }

  .bg-pattern {
    position: fixed; inset: 0; z-index: 0; pointer-events: none;
    background:
      radial-gradient(ellipse at 20% 50%, rgba(245,158,11,0.06) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, rgba(52,211,153,0.04) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 80%, rgba(233,69,96,0.03) 0%, transparent 50%);
  }

  #app {
    position: relative; z-index: 1;
    width: 100%; max-width: 560px;
    padding: 24px;
    min-height: 100vh;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
  }

  #app:has(.result-screen) {
    justify-content: flex-start;
    padding-top: 40px;
    padding-bottom: 40px;
  }

  /* ‚îÄ‚îÄ‚îÄ BACK BUTTON ‚îÄ‚îÄ‚îÄ */
  .back-btn {
    position: fixed;
    top: 16px; left: 16px;
    z-index: 10;
    background: var(--surface);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 8px 16px;
    color: var(--text-dim);
    font-family: 'Nunito', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.2s ease;
    display: flex; align-items: center; gap: 6px;
  }

  .back-btn:hover {
    background: var(--card-hover);
    color: var(--text);
  }

  /* ‚îÄ‚îÄ‚îÄ START SCREEN ‚îÄ‚îÄ‚îÄ */
  .start-screen {
    text-align: center;
    animation: fadeUp 0.6s ease;
  }

  .start-emoji {
    font-size: 4rem;
    display: block;
    margin-bottom: 16px;
    animation: bounce 2s ease infinite;
  }

  .start-screen h1 {
    font-family: 'Fredoka', sans-serif;
    font-size: 2.8rem;
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 8px;
    background: linear-gradient(135deg, var(--accent), #fde68a);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .start-screen .subtitle {
    color: var(--text-dim);
    font-size: 1rem;
    margin-bottom: 48px;
  }

  .start-btn {
    background: linear-gradient(135deg, var(--accent), #fde68a);
    border: none;
    border-radius: var(--radius);
    padding: 16px 48px;
    font-family: 'Fredoka', sans-serif;
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--bg);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .start-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 24px var(--accent-glow);
  }

  /* ‚îÄ‚îÄ‚îÄ CONTINENT SELECTION ‚îÄ‚îÄ‚îÄ */
  .continent-screen {
    width: 100%;
    text-align: center;
    animation: fadeUp 0.5s ease;
  }

  .continent-screen h2 {
    font-family: 'Fredoka', sans-serif;
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 8px;
  }

  .continent-screen .sub {
    color: var(--text-dim);
    font-size: 0.9rem;
    margin-bottom: 28px;
  }

  .continent-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-bottom: 20px;
  }

  .continent-btn {
    background: var(--card);
    border: 2px solid transparent;
    border-radius: var(--radius);
    padding: 16px 12px;
    cursor: pointer;
    transition: all 0.25s ease;
    text-align: center;
    user-select: none;
    color: var(--text);
  }

  .continent-btn.selected {
    border-color: var(--accent);
    background: rgba(245, 158, 11, 0.1);
  }

  .continent-btn:hover {
    background: var(--card-hover);
  }

  .continent-btn .c-icon { font-size: 1.8rem; margin-bottom: 4px; }
  .continent-btn .c-name { font-family: 'Fredoka', sans-serif; font-size: 1rem; font-weight: 600; }
  .continent-btn .c-count { font-size: 0.75rem; color: var(--text-dim); }

  .continent-info {
    color: var(--text-dim);
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 24px;
  }
  .continent-info span { color: var(--accent); }

  .continent-actions {
    display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;
  }

  .go-btn {
    background: linear-gradient(135deg, var(--accent), #fde68a);
    border: none;
    border-radius: var(--radius);
    padding: 14px 40px;
    font-family: 'Fredoka', sans-serif;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--bg);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .go-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px var(--accent-glow);
  }

  .go-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .toggle-all-btn {
    background: var(--card);
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: var(--radius);
    padding: 14px 24px;
    font-family: 'Nunito', sans-serif;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-dim);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .toggle-all-btn:hover {
    background: var(--card-hover);
    color: var(--text);
  }

  /* ‚îÄ‚îÄ‚îÄ QUIZ SCREEN ‚îÄ‚îÄ‚îÄ */
  .quiz-screen {
    width: 100%;
    animation: fadeUp 0.5s ease;
  }

  .quiz-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 12px;
  }

  .quiz-header .round-tag {
    font-size: 0.7rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 2px; color: var(--accent);
    background: var(--accent-glow);
    padding: 4px 12px; border-radius: 100px;
  }

  .quiz-header .score-display {
    font-size: 0.85rem; color: var(--text-dim); font-weight: 600;
  }
  .quiz-header .score-display span { color: var(--green); }

  .progress-bar {
    width: 100%; height: 6px;
    background: var(--card);
    border-radius: 100px;
    margin-bottom: 32px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), #fde68a);
    border-radius: 100px;
    transition: width 0.5s ease;
  }

  .question-num {
    text-align: center;
    font-size: 0.8rem; color: var(--text-dim);
    margin-bottom: 8px; font-weight: 600;
  }

  .flag-container {
    position: relative;
    text-align: center;
    margin-bottom: 32px;
  }

  .flag-display {
    font-size: 8rem;
    line-height: 1;
    animation: popIn 0.4s ease;
    filter: drop-shadow(0 8px 30px rgba(0,0,0,0.3));
    user-select: none;
  }

  .hint-btn {
    position: absolute;
    bottom: -4px; right: calc(50% - 100px);
    background: var(--surface);
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 50%;
    width: 44px; height: 44px;
    font-size: 1.3rem;
    cursor: pointer;
    transition: all 0.25s ease;
    display: flex; align-items: center; justify-content: center;
  }

  .hint-btn:hover {
    border-color: var(--accent);
    background: var(--card-hover);
    transform: scale(1.1);
  }

  /* Choices */
  .choices {
    display: flex; flex-direction: column; gap: 12px;
  }

  .choice-btn {
    background: var(--card);
    border: 2px solid transparent;
    border-radius: var(--radius);
    padding: 16px 20px;
    font-family: 'Nunito', sans-serif;
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--text);
    cursor: pointer;
    transition: all 0.25s ease;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .choice-btn:hover:not(.disabled) {
    background: var(--card-hover);
    border-color: var(--accent);
    transform: translateX(6px);
  }

  .choice-btn.correct {
    background: rgba(52, 211, 153, 0.15);
    border-color: var(--green);
    color: var(--green);
  }

  .choice-btn.wrong {
    background: rgba(248, 113, 113, 0.12);
    border-color: var(--red);
    color: var(--red);
  }

  .choice-btn.disabled { pointer-events: none; opacity: 0.5; }
  .choice-btn.correct.disabled { opacity: 1; }

  .key-hint {
    display: inline-flex;
    align-items: center; justify-content: center;
    width: 26px; height: 26px;
    background: rgba(255,255,255,0.08);
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-dim);
    flex-shrink: 0;
  }

  @media (hover: none) {
    .key-hint { display: none; }
  }

  /* ‚îÄ‚îÄ‚îÄ HINT MODAL ‚îÄ‚îÄ‚îÄ */
  .hint-overlay {
    position: fixed; inset: 0; z-index: 100;
    background: rgba(0,0,0,0.7);
    display: flex; align-items: center; justify-content: center;
    animation: fadeIn 0.2s ease;
    backdrop-filter: blur(4px);
  }

  .hint-modal {
    background: var(--surface);
    border-radius: 24px;
    padding: 32px;
    text-align: center;
    max-width: 340px;
    width: 90%;
    animation: popIn 0.3s ease;
    border: 1px solid rgba(255,255,255,0.1);
  }

  .hint-modal h3 {
    font-family: 'Fredoka', sans-serif;
    font-size: 1.1rem;
    margin-bottom: 4px;
    color: var(--text-dim);
  }

  .hint-continent-name {
    color: var(--accent);
    font-family: 'Fredoka', sans-serif;
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 20px;
  }

  .hint-modal svg {
    width: 100%;
    max-width: 240px;
    height: auto;
    margin: 0 auto 20px;
    display: block;
  }

  .hint-close {
    background: var(--card);
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 10px 32px;
    font-family: 'Nunito', sans-serif;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .hint-close:hover {
    background: var(--card-hover);
    border-color: var(--accent);
  }

  /* ‚îÄ‚îÄ‚îÄ RESULT SCREEN ‚îÄ‚îÄ‚îÄ */
  .result-screen {
    text-align: center;
    animation: fadeUp 0.6s ease;
  }

  .result-screen .trophy { font-size: 5rem; margin-bottom: 16px; }

  .result-screen h2 {
    font-family: 'Fredoka', sans-serif;
    font-size: 2.2rem; font-weight: 700;
    margin-bottom: 8px;
  }

  .result-screen .result-score {
    font-size: 3.5rem; font-weight: 700;
    font-family: 'Fredoka', sans-serif;
    background: linear-gradient(135deg, var(--accent), #fde68a);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 16px 0;
  }

  .result-screen .result-text {
    color: var(--text-dim); font-size: 1rem;
    margin-bottom: 36px;
  }

  .result-details {
    width: 100%;
    margin-bottom: 32px;
    display: flex; flex-direction: column; gap: 8px;
  }

  .result-row {
    display: flex; align-items: center; gap: 12px;
    background: var(--card);
    border-radius: 12px;
    padding: 12px 16px;
    font-size: 0.9rem;
  }

  .result-row .r-flag { font-size: 1.6rem; }
  .result-row .r-name { flex: 1; text-align: left; font-weight: 500; }
  .result-row .r-icon { font-size: 1.2rem; }

  .result-actions {
    display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;
  }

  .restart-btn {
    background: var(--card);
    border: 2px solid var(--accent);
    border-radius: var(--radius);
    padding: 14px 32px;
    font-family: 'Nunito', sans-serif;
    font-size: 1rem; font-weight: 700;
    color: var(--accent);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .restart-btn:hover {
    background: var(--accent);
    color: var(--bg);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px var(--accent-glow);
  }

  .region-btn {
    background: var(--card);
    border: 2px solid rgba(255,255,255,0.15);
    border-radius: var(--radius);
    padding: 14px 32px;
    font-family: 'Nunito', sans-serif;
    font-size: 1rem; font-weight: 700;
    color: var(--text-dim);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .region-btn:hover {
    background: var(--card-hover);
    color: var(--text);
    transform: translateY(-2px);
  }

  /* ‚îÄ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ‚îÄ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes popIn {
    0% { transform: scale(0.5); opacity: 0; }
    70% { transform: scale(1.08); }
    100% { transform: scale(1); opacity: 1; }
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  @media (max-width: 500px) {
    .start-screen h1 { font-size: 2rem; }
    .flag-display { font-size: 6rem; }
    .continent-grid { grid-template-columns: repeat(2, 1fr); }
    .hint-btn { right: calc(50% - 80px); }
  }
</style>
</head>
<body>
<div class="bg-pattern"></div>
<a class="back-btn" href="index.html">‚Üê Zur√ºck</a>
<div id="app"></div>

<script>
// ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ
// [flag, name, continent]
// EU=Europa, AS=Asien, AF=Afrika, NA=Nordamerika, SA=S√ºdamerika, OZ=Ozeanien
const ALL_COUNTRIES = [
  ["üá¶üá´","Afghanistan","AS"],["üá¶üá±","Albanien","EU"],["üá©üáø","Algerien","AF"],["üá¶üá©","Andorra","EU"],["üá¶üá¥","Angola","AF"],
  ["üá¶üá¨","Antigua und Barbuda","NA"],["üá¶üá∑","Argentinien","SA"],["üá¶üá≤","Armenien","AS"],["üá¶üá∫","Australien","OZ"],["üá¶üáπ","√ñsterreich","EU"],
  ["üá¶üáø","Aserbaidschan","AS"],["üáßüá∏","Bahamas","NA"],["üáßüá≠","Bahrain","AS"],["üáßüá©","Bangladesch","AS"],["üáßüáß","Barbados","NA"],
  ["üáßüáæ","Belarus","EU"],["üáßüá™","Belgien","EU"],["üáßüáø","Belize","NA"],["üáßüáØ","Benin","AF"],["üáßüáπ","Bhutan","AS"],
  ["üáßüá¥","Bolivien","SA"],["üáßüá¶","Bosnien und Herzegowina","EU"],["üáßüáº","Botswana","AF"],["üáßüá∑","Brasilien","SA"],["üáßüá≥","Brunei","AS"],
  ["üáßüá¨","Bulgarien","EU"],["üáßüá´","Burkina Faso","AF"],["üáßüáÆ","Burundi","AF"],["üá∞üá≠","Kambodscha","AS"],["üá®üá≤","Kamerun","AF"],
  ["üá®üá¶","Kanada","NA"],["üá®üáª","Kap Verde","AF"],["üá®üá´","Zentralafrikanische Republik","AF"],["üáπüá©","Tschad","AF"],["üá®üá±","Chile","SA"],
  ["üá®üá≥","China","AS"],["üá®üá¥","Kolumbien","SA"],["üá∞üá≤","Komoren","AF"],["üá®üá¨","Republik Kongo","AF"],["üá®üá©","Demokratische Republik Kongo","AF"],
  ["üá®üá∑","Costa Rica","NA"],["üá≠üá∑","Kroatien","EU"],["üá®üá∫","Kuba","NA"],["üá®üáæ","Zypern","EU"],["üá®üáø","Tschechien","EU"],
  ["üá©üá∞","D√§nemark","EU"],["üá©üáØ","Dschibuti","AF"],["üá©üá≤","Dominica","NA"],["üá©üá¥","Dominikanische Republik","NA"],["üá™üá®","Ecuador","SA"],
  ["üá™üá¨","√Ñgypten","AF"],["üá∏üáª","El Salvador","NA"],["üá¨üá∂","√Ñquatorialguinea","AF"],["üá™üá∑","Eritrea","AF"],["üá™üá™","Estland","EU"],
  ["üá∏üáø","Eswatini","AF"],["üá™üáπ","√Ñthiopien","AF"],["üá´üáØ","Fidschi","OZ"],["üá´üáÆ","Finnland","EU"],["üá´üá∑","Frankreich","EU"],
  ["üá¨üá¶","Gabun","AF"],["üá¨üá≤","Gambia","AF"],["üá¨üá™","Georgien","AS"],["üá©üá™","Deutschland","EU"],["üá¨üá≠","Ghana","AF"],
  ["üá¨üá∑","Griechenland","EU"],["üá¨üá©","Grenada","NA"],["üá¨üáπ","Guatemala","NA"],["üá¨üá≥","Guinea","AF"],["üá¨üáº","Guinea-Bissau","AF"],
  ["üá¨üáæ","Guyana","SA"],["üá≠üáπ","Haiti","NA"],["üá≠üá≥","Honduras","NA"],["üá≠üá∫","Ungarn","EU"],["üáÆüá∏","Island","EU"],
  ["üáÆüá≥","Indien","AS"],["üáÆüá©","Indonesien","AS"],["üáÆüá∑","Iran","AS"],["üáÆüá∂","Irak","AS"],["üáÆüá™","Irland","EU"],
  ["üáÆüá±","Israel","AS"],["üáÆüáπ","Italien","EU"],["üá®üáÆ","Elfenbeink√ºste","AF"],["üáØüá≤","Jamaika","NA"],["üáØüáµ","Japan","AS"],
  ["üáØüá¥","Jordanien","AS"],["üá∞üáø","Kasachstan","AS"],["üá∞üá™","Kenia","AF"],["üá∞üáÆ","Kiribati","OZ"],["üá∞üáµ","Nordkorea","AS"],
  ["üá∞üá∑","S√ºdkorea","AS"],["üá∞üáº","Kuwait","AS"],["üá∞üá¨","Kirgisistan","AS"],["üá±üá¶","Laos","AS"],["üá±üáª","Lettland","EU"],
  ["üá±üáß","Libanon","AS"],["üá±üá∏","Lesotho","AF"],["üá±üá∑","Liberia","AF"],["üá±üáæ","Libyen","AF"],["üá±üáÆ","Liechtenstein","EU"],
  ["üá±üáπ","Litauen","EU"],["üá±üá∫","Luxemburg","EU"],["üá≤üá¨","Madagaskar","AF"],["üá≤üáº","Malawi","AF"],["üá≤üáæ","Malaysia","AS"],
  ["üá≤üáª","Malediven","AS"],["üá≤üá±","Mali","AF"],["üá≤üáπ","Malta","EU"],["üá≤üá≠","Marshallinseln","OZ"],["üá≤üá∑","Mauretanien","AF"],
  ["üá≤üá∫","Mauritius","AF"],["üá≤üáΩ","Mexiko","NA"],["üá´üá≤","Mikronesien","OZ"],["üá≤üá©","Moldau","EU"],["üá≤üá®","Monaco","EU"],
  ["üá≤üá≥","Mongolei","AS"],["üá≤üá™","Montenegro","EU"],["üá≤üá¶","Marokko","AF"],["üá≤üáø","Mosambik","AF"],["üá≤üá≤","Myanmar","AS"],
  ["üá≥üá¶","Namibia","AF"],["üá≥üá∑","Nauru","OZ"],["üá≥üáµ","Nepal","AS"],["üá≥üá±","Niederlande","EU"],["üá≥üáø","Neuseeland","OZ"],
  ["üá≥üáÆ","Nicaragua","NA"],["üá≥üá™","Niger","AF"],["üá≥üá¨","Nigeria","AF"],["üá≤üá∞","Nordmazedonien","EU"],["üá≥üá¥","Norwegen","EU"],
  ["üá¥üá≤","Oman","AS"],["üáµüá∞","Pakistan","AS"],["üáµüáº","Palau","OZ"],["üáµüá∏","Pal√§stina","AS"],["üáµüá¶","Panama","NA"],
  ["üáµüá¨","Papua-Neuguinea","OZ"],["üáµüáæ","Paraguay","SA"],["üáµüá™","Peru","SA"],["üáµüá≠","Philippinen","AS"],["üáµüá±","Polen","EU"],
  ["üáµüáπ","Portugal","EU"],["üá∂üá¶","Katar","AS"],["üá∑üá¥","Rum√§nien","EU"],["üá∑üá∫","Russland","EU"],["üá∑üáº","Ruanda","AF"],
  ["üá∞üá≥","St. Kitts und Nevis","NA"],["üá±üá®","St. Lucia","NA"],["üáªüá®","St. Vincent und die Grenadinen","NA"],
  ["üáºüá∏","Samoa","OZ"],["üá∏üá≤","San Marino","EU"],["üá∏üáπ","S√£o Tom√© und Pr√≠ncipe","AF"],["üá∏üá¶","Saudi-Arabien","AS"],
  ["üá∏üá≥","Senegal","AF"],["üá∑üá∏","Serbien","EU"],["üá∏üá®","Seychellen","AF"],["üá∏üá±","Sierra Leone","AF"],["üá∏üá¨","Singapur","AS"],
  ["üá∏üá∞","Slowakei","EU"],["üá∏üáÆ","Slowenien","EU"],["üá∏üáß","Salomonen","OZ"],["üá∏üá¥","Somalia","AF"],["üáøüá¶","S√ºdafrika","AF"],
  ["üá∏üá∏","S√ºdsudan","AF"],["üá™üá∏","Spanien","EU"],["üá±üá∞","Sri Lanka","AS"],["üá∏üá©","Sudan","AF"],["üá∏üá∑","Suriname","SA"],
  ["üá∏üá™","Schweden","EU"],["üá®üá≠","Schweiz","EU"],["üá∏üáæ","Syrien","AS"],["üáπüáº","Taiwan","AS"],["üáπüáØ","Tadschikistan","AS"],
  ["üáπüáø","Tansania","AF"],["üáπüá≠","Thailand","AS"],["üáπüá±","Osttimor","AS"],["üáπüá¨","Togo","AF"],["üáπüá¥","Tonga","OZ"],
  ["üáπüáπ","Trinidad und Tobago","NA"],["üáπüá≥","Tunesien","AF"],["üáπüá∑","T√ºrkei","AS"],["üáπüá≤","Turkmenistan","AS"],["üáπüáª","Tuvalu","OZ"],
  ["üá∫üá¨","Uganda","AF"],["üá∫üá¶","Ukraine","EU"],["üá¶üá™","Vereinigte Arabische Emirate","AS"],["üá¨üáß","Vereinigtes K√∂nigreich","EU"],
  ["üá∫üá∏","Vereinigte Staaten","NA"],["üá∫üáæ","Uruguay","SA"],["üá∫üáø","Usbekistan","AS"],["üáªüá∫","Vanuatu","OZ"],
  ["üáªüá¶","Vatikanstadt","EU"],["üáªüá™","Venezuela","SA"],["üáªüá≥","Vietnam","AS"],["üáæüá™","Jemen","AS"],["üáøüá≤","Sambia","AF"],["üáøüáº","Simbabwe","AF"]
];

const CONTINENTS = {
  EU: { name: 'Europa', icon: 'üè∞' },
  AF: { name: 'Afrika', icon: 'üåç' },
  AS: { name: 'Asien', icon: 'üèØ' },
  NA: { name: 'Nordamerika', icon: 'üóΩ' },
  SA: { name: 'S√ºdamerika', icon: 'üåé' },
  OZ: { name: 'Ozeanien', icon: 'üèùÔ∏è' }
};

// ‚îÄ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ
const app = document.getElementById('app');
let selectedContinents = new Set(Object.keys(CONTINENTS));
let questions, current, score, answers, totalQ;

// ‚îÄ‚îÄ‚îÄ UTILITIES ‚îÄ‚îÄ‚îÄ
function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function getFilteredCountries() {
  return ALL_COUNTRIES.filter(c => selectedContinents.has(c[2]));
}

function countByContinent(code) {
  return ALL_COUNTRIES.filter(c => c[2] === code).length;
}

// ‚îÄ‚îÄ‚îÄ GLOBE SVG ‚îÄ‚îÄ‚îÄ
function getGlobeSVG(highlight) {
  const dc = '#1e3048';
  const hc = '#f59e0b';
  const c = (id) => id === highlight ? hc : dc;

  return `<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <clipPath id="gc"><circle cx="100" cy="100" r="93"/></clipPath>
      <radialGradient id="gg" cx="40%" cy="35%">
        <stop offset="0%" stop-color="#0f2744"/>
        <stop offset="100%" stop-color="#091428"/>
      </radialGradient>
      <radialGradient id="gs" cx="35%" cy="30%">
        <stop offset="0%" stop-color="rgba(255,255,255,0.06)"/>
        <stop offset="100%" stop-color="transparent"/>
      </radialGradient>
    </defs>
    <circle cx="100" cy="100" r="96" fill="#091428" stroke="#1a3050" stroke-width="1.5"/>
    <circle cx="100" cy="100" r="93" fill="url(#gg)"/>
    <g clip-path="url(#gc)" opacity="0.12">
      <line x1="6" y1="53" x2="194" y2="53" stroke="white" stroke-width="0.5"/>
      <line x1="6" y1="100" x2="194" y2="100" stroke="white" stroke-width="0.5"/>
      <line x1="6" y1="147" x2="194" y2="147" stroke="white" stroke-width="0.5"/>
      <line x1="53" y1="6" x2="53" y2="194" stroke="white" stroke-width="0.5"/>
      <line x1="100" y1="6" x2="100" y2="194" stroke="white" stroke-width="0.5"/>
      <line x1="147" y1="6" x2="147" y2="194" stroke="white" stroke-width="0.5"/>
    </g>
    <g clip-path="url(#gc)">
      <path d="M18,36 L28,26 L46,22 L60,26 L68,36 L68,48 L62,58 L58,68 L50,76 L52,84 L48,92 L44,86 L36,72 L28,54 L20,44 Z" fill="${c('NA')}" opacity="0.85"/>
      <path d="M52,100 L62,94 L70,100 L72,116 L68,132 L62,148 L54,152 L50,142 L48,126 L48,108 Z" fill="${c('SA')}" opacity="0.85"/>
      <path d="M88,28 L96,24 L108,28 L114,36 L112,46 L106,54 L98,52 L90,44 Z" fill="${c('EU')}" opacity="0.85"/>
      <path d="M86,62 L96,58 L110,60 L120,68 L124,82 L122,100 L116,116 L108,128 L100,126 L92,114 L86,96 L84,76 Z" fill="${c('AF')}" opacity="0.85"/>
      <path d="M114,24 L130,20 L150,18 L168,24 L178,36 L180,52 L176,68 L168,80 L156,86 L142,82 L130,74 L120,62 L114,46 L112,34 Z" fill="${c('AS')}" opacity="0.85"/>
      <path d="M152,110 L166,104 L180,108 L184,120 L178,130 L166,134 L154,128 L148,118 Z M168,96 L174,94 L176,100 L170,102 Z" fill="${c('OZ')}" opacity="0.85"/>
    </g>
    <circle cx="100" cy="100" r="93" fill="url(#gs)"/>
    <circle cx="100" cy="100" r="93" fill="none" stroke="#1a3050" stroke-width="1.5"/>
  </svg>`;
}

// ‚îÄ‚îÄ‚îÄ SCREENS ‚îÄ‚îÄ‚îÄ
function showStart() {
  app.innerHTML = `
    <div class="start-screen">
      <span class="start-emoji">üåç</span>
      <h1>Flaggen-Quiz</h1>
      <p class="subtitle">Erkennst du alle L√§nderflaggen?</p>
      <button class="start-btn" id="startBtn">Spielen</button>
    </div>`;
  document.getElementById('startBtn').addEventListener('click', showContinentSelect);
}

function showContinentSelect() {
  const pool = getFilteredCountries();
  const allSelected = selectedContinents.size === Object.keys(CONTINENTS).length;

  const grid = Object.entries(CONTINENTS).map(([code, info]) => {
    const count = countByContinent(code);
    const sel = selectedContinents.has(code) ? 'selected' : '';
    return `<div class="continent-btn ${sel}" data-code="${code}">
      <div class="c-icon">${info.icon}</div>
      <div class="c-name">${info.name}</div>
      <div class="c-count">${count} L√§nder</div>
    </div>`;
  }).join('');

  app.innerHTML = `
    <div class="continent-screen">
      <h2>Regionen w√§hlen</h2>
      <p class="sub">W√§hle die Kontinente f√ºr dein Quiz</p>
      <div class="continent-grid">${grid}</div>
      <div class="continent-info"><span>${pool.length}</span> L√§nder ausgew√§hlt</div>
      <div class="continent-actions">
        <button class="toggle-all-btn" id="toggleAll">${allSelected ? 'Alle abw√§hlen' : 'Alle ausw√§hlen'}</button>
        <button class="go-btn" id="goBtn" ${pool.length < 4 ? 'disabled' : ''}>Los geht's</button>
      </div>
    </div>`;

  document.querySelectorAll('.continent-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      toggleContinent(btn.dataset.code);
    });
  });

  document.getElementById('toggleAll').addEventListener('click', toggleAllContinents);

  const goBtn = document.getElementById('goBtn');
  if (!goBtn.disabled) {
    goBtn.addEventListener('click', startGame);
  }
}

function toggleContinent(code) {
  if (selectedContinents.has(code)) {
    selectedContinents.delete(code);
  } else {
    selectedContinents.add(code);
  }
  showContinentSelect();
}

function toggleAllContinents() {
  if (selectedContinents.size === Object.keys(CONTINENTS).length) {
    selectedContinents.clear();
  } else {
    selectedContinents = new Set(Object.keys(CONTINENTS));
  }
  showContinentSelect();
}

function startGame() {
  const pool = getFilteredCountries();
  totalQ = Math.min(10, pool.length);
  questions = generateQuestions(pool);
  current = 0;
  score = 0;
  answers = [];
  showQuestion();
}

function generateQuestions(pool) {
  const picked = shuffle(pool).slice(0, totalQ);
  return picked.map(([flag, name, continent]) => {
    const others = pool.filter(c => c[1] !== name);
    const decoys = shuffle(others).slice(0, 3).map(c => c[1]);
    const options = shuffle([name, ...decoys]);
    return { flag, name, continent, options };
  });
}

function showQuestion() {
  const q = questions[current];
  const progress = (current / totalQ) * 100;

  const choicesHtml = q.options.map((opt, i) =>
    `<button class="choice-btn" data-idx="${i}">
      <span class="key-hint">${i + 1}</span>
      <span>${escapeHtml(opt)}</span>
    </button>`
  ).join('');

  app.innerHTML = `
    <div class="quiz-screen">
      <div class="quiz-header">
        <span class="round-tag">üåç Flaggen-Quiz</span>
        <span class="score-display"><span>${score}</span> / ${current}</span>
      </div>
      <div class="progress-bar"><div class="progress-fill" style="width:${progress}%"></div></div>
      <div class="question-num">Frage ${current + 1} von ${totalQ}</div>
      <div class="flag-container">
        <div class="flag-display">${q.flag}</div>
        <button class="hint-btn" id="hintBtn" title="Hinweis anzeigen">üåê</button>
      </div>
      <div class="choices">${choicesHtml}</div>
    </div>`;

  attachQuizListeners();
}

function escapeHtml(str) {
  const div = document.createElement('div');
  div.textContent = str;
  return div.innerHTML;
}

function attachQuizListeners() {
  document.querySelectorAll('.choice-btn').forEach(btn => {
    btn.addEventListener('click', () => handleAnswer(btn));
  });

  document.getElementById('hintBtn').addEventListener('click', showHint);
}

function handleAnswer(btn) {
  const q = questions[current];
  const idx = parseInt(btn.dataset.idx);
  const chosen = q.options[idx];
  const correct = chosen === q.name;

  if (correct) {
    score++;
    btn.classList.add('correct');
  } else {
    btn.classList.add('wrong');
  }

  document.querySelectorAll('.choice-btn').forEach(b => {
    b.classList.add('disabled');
    // Highlight the correct answer
    const bIdx = parseInt(b.dataset.idx);
    if (q.options[bIdx] === q.name) b.classList.add('correct');
  });

  answers.push({ flag: q.flag, name: q.name, correct });
  setTimeout(next, 1200);
}

function next() {
  current++;
  if (current >= totalQ) showResult();
  else showQuestion();
}

function showResult() {
  let trophy, msg;
  const pct = score / totalQ;
  if (pct === 1) { trophy = 'üèÜ'; msg = 'Perfekt! Du bist ein Flaggen-Genie!'; }
  else if (pct >= 0.8) { trophy = 'ü•á'; msg = 'Hervorragend! Fast perfekt!'; }
  else if (pct >= 0.6) { trophy = 'ü•à'; msg = 'Gut gemacht! Weiter so!'; }
  else if (pct >= 0.4) { trophy = 'ü•â'; msg = 'Nicht schlecht, aber da geht mehr!'; }
  else { trophy = 'üìö'; msg = '√úbung macht den Meister!'; }

  const rows = answers.map(a => `
    <div class="result-row">
      <span class="r-flag">${a.flag}</span>
      <span class="r-name">${escapeHtml(a.name)}</span>
      <span class="r-icon">${a.correct ? '‚úÖ' : '‚ùå'}</span>
    </div>`).join('');

  app.innerHTML = `
    <div class="result-screen">
      <div class="trophy">${trophy}</div>
      <h2>Ergebnis</h2>
      <div class="result-score">${score} / ${totalQ}</div>
      <p class="result-text">${msg}</p>
      <div class="result-details">${rows}</div>
      <div class="result-actions">
        <button class="restart-btn" id="restartBtn">Nochmal spielen</button>
        <button class="region-btn" id="regionBtn">Regionen √§ndern</button>
      </div>
    </div>`;

  document.getElementById('restartBtn').addEventListener('click', startGame);
  document.getElementById('regionBtn').addEventListener('click', showContinentSelect);
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ‚îÄ‚îÄ‚îÄ HINT ‚îÄ‚îÄ‚îÄ
function showHint() {
  const q = questions[current];
  const continent = CONTINENTS[q.continent];

  const overlay = document.createElement('div');
  overlay.className = 'hint-overlay';
  overlay.innerHTML = `
    <div class="hint-modal">
      <h3>Dieses Land liegt in</h3>
      <div class="hint-continent-name">${continent.icon} ${continent.name}</div>
      ${getGlobeSVG(q.continent)}
      <button class="hint-close" id="hintClose">Verstanden</button>
    </div>`;

  document.body.appendChild(overlay);

  document.getElementById('hintClose').addEventListener('click', closeHint);
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) closeHint();
  });
}

function closeHint() {
  const overlay = document.querySelector('.hint-overlay');
  if (overlay) overlay.remove();
}

// ‚îÄ‚îÄ‚îÄ KEYBOARD ‚îÄ‚îÄ‚îÄ
document.addEventListener('keydown', (e) => {
  // Close hint modal with Escape
  if (e.key === 'Escape') {
    closeHint();
    return;
  }

  // Number keys 1-4 for quiz answers
  if (e.key >= '1' && e.key <= '4') {
    const btns = document.querySelectorAll('.choice-btn:not(.disabled)');
    if (btns.length === 0) return;
    const idx = parseInt(e.key) - 1;
    if (btns[idx]) {
      handleAnswer(btns[idx]);
    }
  }
});

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
showStart();
</script>
</body>
</html>
